<div class="admin-dashboard">
  <!-- Sidebar Navigation -->
  <mat-sidenav-container class="sidenav-container">
    <mat-sidenav mode="side" opened class="sidenav">
      <h2 class="logo">üè• Admin</h2>
      <mat-nav-list>
        <a mat-list-item routerLink="/admin/dashboard" routerLinkActive="active">Dashboard</a>
        <a mat-list-item routerLink="/admin/patients" routerLinkActive="active">Patients</a>
        <a mat-list-item routerLink="/admin/appointments" routerLinkActive="active">Appointments</a>
        <a mat-list-item routerLink="/admin/settings" routerLinkActive="active">Settings</a>
      </mat-nav-list>
    </mat-sidenav>

    <!-- Main Content -->
    <mat-sidenav-content class="main-content">
      <mat-toolbar color="primary">
        <span>Hospital Admin Dashboard</span>
        <span class="spacer"></span>
        <button mat-button>Logout</button>
      </mat-toolbar>

      <div class="dashboard-container">
        <!-- Summary Cards -->
        <div class="summary-cards">
          <mat-card>
            <h3>Total Patients: {{ totalPatients }}</h3>
            <canvas baseChart [data]="patientTrend" [type]="'pie'"></canvas>
          </mat-card>

          <mat-card>
            <h3>Total Appointments: {{ totalAppointments }}</h3>
            <canvas baseChart [data]="appointmentTrend" [type]="'line'"></canvas>
          </mat-card>
        </div>

        <!-- Patients Table -->
        <mat-card>
          <h3>All Patients</h3>
          <table mat-table [dataSource]="patients" class="mat-elevation-z2 full-width-table">
            <!-- ID -->
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> ID </th>
              <td mat-cell *matCellDef="let patient">{{ patient.id }}</td>
            </ng-container>

            <!-- Name -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef> Name </th>
              <td mat-cell *matCellDef="let patient">{{ patient.name }}</td>
            </ng-container>

            <!-- Age -->
            <ng-container matColumnDef="age">
              <th mat-header-cell *matHeaderCellDef> Age </th>
              <td mat-cell *matCellDef="let patient">{{ patient.dob }}</td>
            </ng-container>

            <!-- Gender -->
            <ng-container matColumnDef="gender">
              <th mat-header-cell *matHeaderCellDef> Gender </th>
              <td mat-cell *matCellDef="let patient">{{ patient.gender }}</td>
            </ng-container>

            <!-- Contact -->
            <ng-container matColumnDef="contact">
              <th mat-header-cell *matHeaderCellDef> Email </th>
              <td mat-cell *matCellDef="let patient">{{ patient.email }}</td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="patientColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: patientColumns"></tr>
          </table>
        </mat-card>

        <!-- Appointments Table -->
        <mat-card>
          <h3>All Appointments</h3>
          <table mat-table [dataSource]="appointments" class="mat-elevation-z2 full-width-table">
            <!-- ID -->
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef> ID </th>
              <td mat-cell *matCellDef="let app">{{ app.id }}</td>
            </ng-container>

            <!-- Patient Name -->
            <ng-container matColumnDef="patientName">
              <th mat-header-cell *matHeaderCellDef> Patient Name </th>
              <td mat-cell *matCellDef="let app">{{ app.patient?.name || 'N/A' }}</td>
            </ng-container>

            <!-- Date & Time -->
            <ng-container matColumnDef="appointmentDateTime">
              <th mat-header-cell *matHeaderCellDef> Date & Time </th>
              <td mat-cell *matCellDef="let app">{{ app.appointmentDateTime | date:'short' }}</td>
            </ng-container>

            <!-- Status -->
            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef> Status </th>
              <td mat-cell *matCellDef="let app">{{ app.status || 'Pending' }}</td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="appointmentColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: appointmentColumns"></tr>
          </table>
        </mat-card>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
